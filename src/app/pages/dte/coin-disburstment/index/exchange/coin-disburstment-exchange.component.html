<div fxLayout="row" fxLayoutAlign="space-between center" class="top-table pt-8">
  <h2 class="pl-8">List Penukaran Koin</h2>
  <div class="search-field" fxLayout="row" fxLayoutAlign="center center">
    <mat-icon>search</mat-icon>
    <mat-form-field autoComplete="off" class="is-light tab-search">
      <input matInput placeholder="Cari" (keyup)="keyUp.next($event.target.value)">
    </mat-form-field>
  </div>
</div>
<div class="p-16">
  <form [formGroup]="formFilter" autoComplete="off">
    <div fxLayout="row wrap" fxLayoutAlign="space-between stretch" fxLayout.lt-md="column" class="pt-16"
      fxLayoutGap="20px" fxLayoutGap.lt-md="0px">
      <mat-form-field fxFlex="12%" class="is-light form-primary">
        <mat-select placeholder="National" formControlName="national">
          <mat-option *ngFor="let item of listLevelArea" [value]="item.id">{{item.name}}</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field fxFlex="12%" class="is-light form-primary">
        <mat-select placeholder="Zone" formControlName="zone" multiple>
          <mat-option *ngFor="let item of filteringGeotree(list['zone'])" [value]="item.id">{{item.name === 'all' ?
            'Semua
            Zona' :
            item.code}}</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field fxFlex="12%" class="is-light form-primary">
        <mat-select placeholder="Regional" formControlName="region" multiple>
          <mat-option *ngFor="let item of filteringGeotree(list['region'])" [value]="item.id">{{item.name === 'all' ?
            'Semua
            Regional'
            :
            item.code}}</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field fxFlex="12%" class="is-light form-primary">
        <mat-select placeholder="Area" formControlName="area" multiple>
          <mat-option *ngFor="let item of filteringGeotree(list['area'])" [value]="item.id">{{item.name === 'all' ?
            'Semua
            Area'
            :
            item.code}}</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field fxFlex="12%" class="is-light form-primary">
        <mat-select placeholder="Salespoint" formControlName="salespoint" multiple>
          <mat-option *ngFor="let item of filteringGeotree(list['salespoint'])" [value]="item.id">{{item.name === 'all'
            ?
            'Semua
            Salespoint'
            :
            item.code}}</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field fxFlex="12%" class="is-light form-primary">
        <mat-select placeholder="District" formControlName="district" multiple>
          <mat-option *ngFor="let item of filteringGeotree(list['district'])" [value]="item.id">{{item.name === 'all' ?
            'Semua
            District'
            :
            item.code}}</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field fxFlex="12%" class="is-light form-primary">
        <mat-select placeholder="Territory" formControlName="territory" multiple>
          <mat-option *ngFor="let item of filteringGeotree(list['territory'])" [value]="item.id">{{item.name === 'all' ?
            'Semua
            Territori'
            :
            item.code}}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  </form>
</div>
<ngx-datatable class="material" style="border-top: 1px solid #e3e3e3" [rows]="rows"
  [loadingIndicator]="loadingIndicator" [columnMode]="'force'" [headerHeight]="48" [footerHeight]="56" [rowHeight]="48"
  [scrollbarH]="true" [offset]="offsetPagination" [reorderable]="reorderable" [count]="pagination.total"
  [limit]="pagination.per_page" [externalPaging]="true" [externalSorting]="true" (page)="setPage($event)"
  (sort)="onSort($event)">

  <ngx-datatable-column [width]="200" name="Nama Program Penukaran" prop="name" [flexGrow]="3">
  </ngx-datatable-column>

  <ngx-datatable-column [width]="200" name="Retailer Code" prop="retailer_code">
  </ngx-datatable-column>

  <ngx-datatable-column [width]="200" name="Toko SRC" prop="retailer_name">
  </ngx-datatable-column>

  <ngx-datatable-column [width]="200" name="Area" prop="area_code">
  </ngx-datatable-column>
  <ngx-datatable-column [width]="200" name="Regional" prop="division_code">
  </ngx-datatable-column>

  <ngx-datatable-column [width]="200" name="Opsi Penukaran" prop="opsi_penukaran">
    <ng-template ngx-datatable-cell-template let-row="row" let-value="value">
      <span class="row-name" style="text-transform: capitalize;">{{row.opsi_penukaran}}</span>
    </ng-template>
  </ngx-datatable-column>

  <ngx-datatable-column [width]="200" name="Group Trade Program" prop="group_trade_program_name">
  </ngx-datatable-column>

  <!-- Butuh Konfirmasi Om Harry -->
  <ngx-datatable-column [width]="200" name="Nominal Penukaran" prop="nominal_pembayaran">
    <ng-template ngx-datatable-cell-template let-row="row" let-value="value">
      <span class="row-name">{{row.nominal_pembayaran | rupiahFormater}}</span>
    </ng-template>
  </ngx-datatable-column>

  <ngx-datatable-column [width]="200" name="Jumlah Koin yang ditukar" prop="coin">
    <ng-template ngx-datatable-cell-template let-row="row" let-value="value">
      <span class="row-name">{{row.coin | rupiahFormaterWithoutRp}}</span>
    </ng-template>
  </ngx-datatable-column>

  <ngx-datatable-column [width]="200" [sortable]="false" name="Tanggal Request" prop="request_date" [flexGrow]="3">
    <ng-template ngx-datatable-cell-template let-row="row" let-value="value">
      <span>{{row.request_date | dateToMoment}}</span>
    </ng-template>
  </ngx-datatable-column>

  <ngx-datatable-column [width]="200" name="Status Pembayaran" prop="opsi_penukaran">
    <ng-template ngx-datatable-cell-template let-row="row" let-value="value">
      <span class="row-name" style="text-transform: capitalize;">{{row.status_pembayaran ? row.status_pembayaran :
        "-"}}</span>
    </ng-template>
  </ngx-datatable-column>

  <ngx-datatable-column [width]="200" [sortable]="false" name="Tanggal Pembayaran" prop="payment_date" [flexGrow]="3">
    <ng-template ngx-datatable-cell-template let-row="row" let-value="value">
      <span>{{row.payment_date | dateToMoment}}</span>
    </ng-template>
  </ngx-datatable-column>

  <ngx-datatable-column [width]="200" name="Nominal Pembayaran" prop="nominal_pembayaran">
    <ng-template ngx-datatable-cell-template let-row="row" let-value="value">
      <span class="row-name">{{row.nominal_pembayaran | rupiahFormater}}</span>
    </ng-template>
  </ngx-datatable-column>

  <ngx-datatable-column [width]="200" name="Reason" prop="reason">
  </ngx-datatable-column>

</ngx-datatable>