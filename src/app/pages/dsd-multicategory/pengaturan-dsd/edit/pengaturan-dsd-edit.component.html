<div class="page-layout simple fullwidth" fxLayout="column" fusePerfectScrollbar>
  <!-- HEADER -->
  <page-content-header contentTitle="Ubah Pengaturan DSD">
  </page-content-header>
  <!-- / HEADER -->

  <div class="content p-24">
    <div class="ayo-main-wrapper mat-bg-white">
      <form autocomplete="off" [formGroup]="formCreateProposal">
        <div fxLayout="row" class="px-24" fxLayoutAlign="space-between center">
          <h2 class="">Ubah Pengaturan DSD</h2>
        </div>

        <div class="ayo-middle pt-8" fxLayout="column">
          <div class="mt-8" fxLayout="row wrap" fxLayoutGap="60px" fxLayoutGap.lt-md="0px">
            <div fxFlex="45%">
              <!-- SISI KIRI -->

              <div formArrayName="areas" *ngFor="let wil of formCreateProposal.get('areas')['controls']; let i = index;">
                <div [formGroupName]="i">
                  <div class="mt-8 px-24" fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="60px" fxLayoutGap.lt-md="0px">
                    <mat-form-field fxFlex="90%" class="is-light form-primary">
                      <mat-select placeholder="{{'global.area.area' | translate}}" formControlName="area"
                        matTooltip="{{getToolTipData(wil.get('area').value, wil.controls['list_area'].value)}}"
                        (selectionChange)="generataList('salespoint', wil.get('area').value, i, 'selection', $event.source.triggerValue)" >
                        <mat-option *ngFor="let item of wil.controls['list_area'].value" [value]="item.id">
                          {{item.code}}
                        </mat-option>
                      </mat-select>
                      <mat-error
                        *ngIf="wil.controls['area'].hasError('required') && wil.controls['area'].touched">
                        {{'global.area.area' | translate}} {{ls.locale.tactical_retail_sales.proposal_must_be_filled}}
                      </mat-error>
                    </mat-form-field>
                  </div>
                  <div class="mt-8 px-24" fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="60px" fxLayoutGap.lt-md="0px">
                    <mat-form-field fxFlex="90%" class="is-light form-primary">
                      <mat-select placeholder="{{'global.area.salespoint' | translate}}" formControlName="salespoint"
                        matTooltip="{{getToolTipData(wil.get('salespoint').value, wil.controls['list_salespoint'].value)}}"
                        (selectionChange)="generataList('district', wil.get('salespoint').value, i, 'selection', $event.source.triggerValue)">
                        <mat-option *ngFor="let item of wil.controls['list_salespoint'].value" [value]="item.id">
                          {{item.name}}</mat-option>
                      </mat-select>
                      <mat-error
                        *ngIf="wil.controls['salespoint'].hasError('required') && wil.controls['salespoint'].touched">
                        {{'global.area.salespoint' | translate}} {{ls.locale.tactical_retail_sales.proposal_must_be_filled}}
                      </mat-error>
                    </mat-form-field>
                  </div>
                </div>
              </div>

              <div class="mt-8 px-24" fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="60px" fxLayoutGap.lt-md="0px">
                <mat-form-field fxFlex="90%" class="is-light form-primary">
                  <input matInput type="text" formControlName="executor" (click)="modalExecutor()" 
                    placeholder="{{ls.locale.tactical_retail_sales.proposal_executor}}">
                </mat-form-field>
              </div>

              <div class="mt-8 px-24" fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="60px" fxLayoutGap.lt-md="0px">
                <mat-form-field fxFlex="90%" class="is-light form-primary">
                  <input matInput type="text" formControlName="product" (click)="modalProduct()" 
                    placeholder="{{ls.locale.tactical_retail_sales.proposal_product}}">
                </mat-form-field>
              </div>
            </div>

            <div fxFlex="45%" class="is-light form-primary">
              <div class="mt-8 px-24" fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="60px" fxLayoutGap.lt-md="0px">
                <div fxFlex="90%" class="is-light form-primary">
                  <div fxLayout="column" class="mb-8">
                    <h4>Executor:</h4>
                    <div *ngIf="executor_selected_array">
                      <ul class="pl-16 m-0" fxLayout="column" fxLayoutAlign="start start">
                        <li *ngFor="let item of executor_selected_array">
                          {{ item }}
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>

              <div class="mt-8 px-24" fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="60px" fxLayoutGap.lt-md="0px">
                <div fxFlex="90%" class="is-light form-primary">
                  <div fxLayout="column" class="mb-8">
                    <h4>Product:</h4>
                    <div *ngIf="product_selected_array">
                      <ul class="pl-16 m-0" fxLayout="column" fxLayoutAlign="start start">
                        <li *ngFor="let item of product_selected_array">
                          {{ item }}
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>
      </form>
      <div class="confirm pt-24 pb-24" style="padding-left: 22px;" fxLayout="row" fxLayoutGap="20px">
        <button mat-raised-button type="button" class="confirmation-button" fxFlex="20" (click)="submit(0)" *ngIf="permission.ubah">
          {{ls.locale.tactical_retail_sales.save}}
        </button>
      </div>
    </div>
  </div>
</div>