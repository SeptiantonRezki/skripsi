<div class="page-layout simple fullwidth" fxLayout="column" fusePerfectScrollbar>
  <!-- HEADER -->
  <page-content-header contentTitle="Ubah Pengaturan DSD">
  </page-content-header>
  <!-- / HEADER -->

  <div class="content p-24">
    <div class="ayo-main-wrapper mat-bg-white">
      <form autocomplete="off" [formGroup]="formCreateProposal">
        <div fxLayout="row" class="px-24" fxLayoutAlign="space-between center">
          <h2 class="">Ubah Pengaturan DSD</h2>
        </div>

        <div class="ayo-middle pt-8" fxLayout="column">
          <div class="mt-8" fxLayout="row wrap" fxLayoutGap="60px" fxLayoutGap.lt-md="0px">
            <div fxFlex="45%">
              <!-- SISI KIRI -->

              <div formArrayName="areas" *ngFor="let wil of formCreateProposal.get('areas')['controls']; let i = index;">
                <div [formGroupName]="i">
                  <div class="mt-8 px-24" fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="60px" fxLayoutGap.lt-md="0px">
                    <mat-form-field fxFlex="90%" class="is-light form-primary">
                      <mat-select placeholder="{{'global.area.area' | translate}}" formControlName="area"
                        matTooltip="{{getToolTipData(wil.get('area').value, wil.controls['list_area'].value)}}"
                        (selectionChange)="generataList('salespoint', wil.get('area').value, i, 'selection')" 
                        [disabled] = "true">
                        <mat-option *ngFor="let item of wil.controls['list_area'].value" [value]="item.id">
                          {{item.code}}
                        </mat-option>
                      </mat-select>
                      <mat-error
                        *ngIf="wil.controls['area'].hasError('required') && wil.controls['area'].touched">
                        {{'global.area.area' | translate}} {{ls.locale.tactical_retail_sales.proposal_must_be_filled}}
                      </mat-error>
                    </mat-form-field>
                  </div>
                  <div class="mt-8 px-24" fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="60px" fxLayoutGap.lt-md="0px">
                    <mat-form-field fxFlex="90%" class="is-light form-primary">
                      <mat-select placeholder="{{'global.area.salespoint' | translate}}" formControlName="salespoint"
                        matTooltip="{{getToolTipData(wil.get('salespoint').value, wil.controls['list_salespoint'].value)}}"
                        (selectionChange)="generataList('district', wil.get('salespoint').value, i, 'selection')"
                        [disabled] = "proposalData?.status == 'ongoing' || proposalData?.status == 'ready to execute'">
                        <mat-option *ngFor="let item of wil.controls['list_salespoint'].value" [value]="item.id">
                          {{item.name}}</mat-option>
                      </mat-select>
                      <mat-error
                        *ngIf="wil.controls['salespoint'].hasError('required') && wil.controls['salespoint'].touched">
                        {{'global.area.salespoint' | translate}} {{ls.locale.tactical_retail_sales.proposal_must_be_filled}}
                      </mat-error>
                    </mat-form-field>
                  </div>
                </div>
              </div>

              <div class="mt-8 px-24" fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="60px" fxLayoutGap.lt-md="0px">
                <mat-form-field fxFlex="90%" class="is-light form-primary">
                  <input matInput type="text" formControlName="executor" (click)="modalExecutor()" 
                    placeholder="{{ls.locale.tactical_retail_sales.proposal_executor}}">
                </mat-form-field>
              </div>

              <div class="mt-8 px-24" fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="60px" fxLayoutGap.lt-md="0px">
                <mat-form-field fxFlex="90%" class="is-light form-primary">
                  <input matInput type="text" formControlName="product" (click)="modalProduct()" 
                    placeholder="{{ls.locale.tactical_retail_sales.proposal_product}}">
                </mat-form-field>
              </div>
            </div>

            <div fxFlex="45%" class="is-light form-primary">
              <div class="mt-8 px-24" fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="60px" fxLayoutGap.lt-md="0px">
                <div fxFlex="90%" class="is-light form-primary">
                  <div fxLayout="column" class="mb-8">
                    <label class="field-label">{{ls.locale.tactical_retail_sales.proposal_selected_executor}}</label>
                    <div fxLayout="row" >
                      <div class="body-layout" fxFlex="100%" fxFlex.gt-sm="150" style="background-color: #ddd;">
                        <textarea matInput class="body-text" placeholder="{{ls.locale.tactical_retail_sales.proposal_selected_executor}}" formControlName="executor_selected" wrap="soft" [readonly]="true"></textarea>
                      </div>
                    </div>
                    <mat-error *ngIf="formCreateProposal.controls['executor_selected'].hasError('required') && formCreateProposal.controls['executor_selected'].touched">
                      {{ls.locale.tactical_retail_sales.proposal_executor}} {{ls.locale.tactical_retail_sales.proposal_must_be_choosen}}
                    </mat-error>
                  </div>
                </div>
              </div>

              <div class="mt-8 px-24" fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="60px" fxLayoutGap.lt-md="0px">
                <div fxFlex="90%" class="is-light form-primary">
                  <div fxLayout="column" class="mb-8">
                    <label class="field-label">{{ls.locale.tactical_retail_sales.proposal_selected_product}}</label>
                    <div fxLayout="row" >
                      <div class="body-layout" fxFlex="100%" fxFlex.gt-sm="150" style="background-color: #ddd;">
                        <textarea matInput class="body-text" placeholder="{{ls.locale.tactical_retail_sales.proposal_selected_product}}" formControlName="product_selected" wrap="soft" [readonly]="true"></textarea>
                      </div>
                    </div>
                    <mat-error *ngIf="formCreateProposal.controls['product_selected'].hasError('required') && formCreateProposal.controls['product_selected'].touched">
                      {{ls.locale.tactical_retail_sales.proposal_product}} {{ls.locale.tactical_retail_sales.proposal_must_be_choosen}}
                    </mat-error>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>
      </form>
      <div class="confirm pt-24 pb-24" style="padding-left: 22px;" fxLayout="row" fxLayoutGap="20px">
        <button mat-raised-button type="button" class="confirmation-button" fxFlex="20" (click)="submit(0)" *ngIf="permission.ubah">
          {{ls.locale.tactical_retail_sales.save}}
        </button>
      </div>
    </div>
  </div>
</div>